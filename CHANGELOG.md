# История изменений (Changelog)

## v1.3

### Модульная структура
- Код разделён на отдельные модули:
  - `arduino_to_flprog_GLOBAL_COMPLETE.py` — точка входа (GUI/CLI)
  - `gui.py` — графический интерфейс PyQt5
  - `generator.py` — генерация SIXX XML для FLProg
  - `parser.py` — парсинг Arduino кода
  - `constants.py` — константы, версия, маппинг типов

### Справка в GUI
- Меню «Справка» с пунктами «Справка...» (F1) и «О программе»
- Текст справки загружается из `README.md` (поддержка Markdown)
- `README.md` включается в exe при сборке

### Разметка интерфейса
- Вкладки «Переменные» и «Функции» занимают 75% высоты правой панели
- «Настройки блока» и кнопка «Сгенерировать» — 25%

### Иконка
- Поддержка `icon.ico` для окна приложения и exe
- Fallback на стандартную иконку Qt при отсутствии файла
- Spec-файл добавляет icon.ico в bundle при сборке

### Исправления
- **Падение при открытии .ino:** при запуске exe текущая папка может быть `system32`. Диалог «Загрузить .ino» теперь использует безопасную начальную папку (домашняя пользователя), а не текущую. Метод `_get_safe_home_dir()` предотвращает открытие system32.

### Сборка
- Spec-файл: `arduino_to_flprog_GLOBAL_COMPLETE.spec`
- Exe именуется `ino2ubi_v{VERSION}.exe` (например `ino2ubi_v1.3.exe`)
- В bundle: `icon.ico`, `README.md`, модули `constants`, `parser`, `generator`, `gui`

---

## v1.2

- Начальная версия с GUI и CLI режимами
- Парсинг Arduino скетчей, генерация .ubi

---

## v1.0

- Первая версия конвертера Arduino → FLProg
